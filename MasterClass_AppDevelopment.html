<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MasterClass: How Modern Applications Are Built</title>
    <style>
        /* Import Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&family=Source+Code+Pro:wght@400;600&family=Inter:wght@400;500;600;700&display=swap');

        /* CSS Variables */
        :root {
            --primary: #1a365d;
            --secondary: #2c5282;
            --accent: #ed8936;
            --text: #2d3748;
            --text-light: #4a5568;
            --bg: #ffffff;
            --bg-alt: #f7fafc;
            --border: #e2e8f0;
            --code-bg: #1a202c;
            --success: #38a169;
            --warning: #d69e2e;
        }

        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 11pt;
            line-height: 1.7;
            color: var(--text);
            background: var(--bg);
            max-width: 850px;
            margin: 0 auto;
            padding: 40px;
        }

        /* Print Styles */
        @media print {
            body {
                padding: 0;
                font-size: 10pt;
            }

            .page-break {
                page-break-before: always;
            }

            .no-break {
                page-break-inside: avoid;
            }

            h1, h2, h3 {
                page-break-after: avoid;
            }

            pre, table, .diagram-box {
                page-break-inside: avoid;
            }
        }

        /* Cover Page */
        .cover {
            text-align: center;
            padding: 100px 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            margin: -40px -40px 40px -40px;
            border-radius: 0 0 20px 20px;
        }

        .cover h1 {
            font-family: 'Merriweather', serif;
            font-size: 2.8em;
            font-weight: 900;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .cover .subtitle {
            font-size: 1.4em;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        .cover .meta {
            font-size: 1em;
            opacity: 0.8;
        }

        .cover .badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 8px 24px;
            border-radius: 30px;
            font-weight: 600;
            margin-top: 30px;
        }

        /* Typography */
        h1 {
            font-family: 'Merriweather', serif;
            font-size: 2em;
            color: var(--primary);
            margin: 50px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--accent);
        }

        h2 {
            font-family: 'Merriweather', serif;
            font-size: 1.5em;
            color: var(--secondary);
            margin: 40px 0 15px 0;
        }

        h3 {
            font-size: 1.2em;
            color: var(--text);
            margin: 30px 0 12px 0;
            font-weight: 600;
        }

        h4 {
            font-size: 1em;
            color: var(--text-light);
            margin: 20px 0 10px 0;
            font-weight: 600;
        }

        p {
            margin-bottom: 15px;
        }

        /* Table of Contents */
        .toc {
            background: var(--bg-alt);
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .toc h2 {
            margin-top: 0;
            color: var(--primary);
        }

        .toc ol {
            counter-reset: toc;
            list-style: none;
            padding-left: 0;
        }

        .toc > ol > li {
            counter-increment: toc;
            margin: 12px 0;
        }

        .toc > ol > li::before {
            content: "Part " counter(toc) ": ";
            font-weight: 700;
            color: var(--accent);
        }

        .toc a {
            color: var(--text);
            text-decoration: none;
        }

        .toc a:hover {
            color: var(--accent);
        }

        /* Diagrams & Boxes */
        .diagram-box {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            font-family: 'Source Code Pro', monospace;
            font-size: 0.85em;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre;
        }

        .concept-box {
            background: linear-gradient(135deg, #ebf8ff 0%, #e6fffa 100%);
            border-left: 4px solid var(--secondary);
            padding: 20px 25px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }

        .concept-box h4 {
            color: var(--secondary);
            margin-top: 0;
        }

        .warning-box {
            background: #fffaf0;
            border-left: 4px solid var(--warning);
            padding: 20px 25px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: var(--warning);
            margin-top: 0;
        }

        .success-box {
            background: #f0fff4;
            border-left: 4px solid var(--success);
            padding: 20px 25px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }

        /* Code Blocks */
        pre {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Source Code Pro', monospace;
            font-size: 0.85em;
            line-height: 1.6;
        }

        code {
            font-family: 'Source Code Pro', monospace;
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            padding: 0;
        }

        .code-label {
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 6px 6px 0 0;
            font-size: 0.8em;
            font-weight: 600;
            display: inline-block;
            margin-bottom: -5px;
        }

        /* Syntax Highlighting */
        .keyword { color: #f687b3; }
        .string { color: #68d391; }
        .comment { color: #718096; font-style: italic; }
        .function { color: #63b3ed; }
        .number { color: #fbd38d; }
        .decorator { color: #b794f4; }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9em;
        }

        th {
            background: var(--primary);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border);
        }

        tr:nth-child(even) {
            background: var(--bg-alt);
        }

        /* Lists */
        ul, ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
        }

        /* Checklist */
        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding-left: 30px;
            position: relative;
        }

        .checklist li::before {
            content: "☐";
            position: absolute;
            left: 0;
            color: var(--secondary);
        }

        /* Columns */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 700px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        /* Flow Arrows */
        .flow-step {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
        }

        .flow-number {
            background: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
        }

        /* Part Headers */
        .part-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin: 50px 0 30px 0;
            text-align: center;
        }

        .part-header h1 {
            color: white;
            border: none;
            margin: 0;
            padding: 0;
        }

        .part-header .part-number {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        /* Summary Box */
        .summary-box {
            background: var(--bg-alt);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .summary-box h3 {
            color: var(--primary);
            margin-top: 0;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 60px;
            border-top: 2px solid var(--border);
            color: var(--text-light);
        }

        /* Highlight */
        mark {
            background: #fefcbf;
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Blockquote */
        blockquote {
            border-left: 4px solid var(--accent);
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover">
        <h1>MasterClass:<br>How Modern Applications Are Built</h1>
        <p class="subtitle">A Complete Guide to Full-Stack Development</p>
        <p class="meta">Using FridgeChef as a Real-World Case Study</p>
        <span class="badge">From Zero to Production</span>
    </div>

    <!-- Table of Contents -->
    <div class="toc">
        <h2>Table of Contents</h2>
        <ol>
            <li><a href="#part1">The Fundamental Mental Model</a></li>
            <li><a href="#part2">The Three-Tier Architecture</a></li>
            <li><a href="#part3">The Frontend - In Depth</a></li>
            <li><a href="#part4">The Backend - In Depth</a></li>
            <li><a href="#part5">The Database - In Depth</a></li>
            <li><a href="#part6">How Everything Connects</a></li>
            <li><a href="#part7">Authentication Deep Dive</a></li>
            <li><a href="#part8">Configuration & Environment</a></li>
            <li><a href="#part9">Deployment - Going Live</a></li>
            <li><a href="#part10">Security Essentials</a></li>
            <li><a href="#part11">Complete File Reference</a></li>
            <li><a href="#part12">The App Building Checklist</a></li>
        </ol>
    </div>

    <!-- PART 1 -->
    <div class="part-header page-break" id="part1">
        <div class="part-number">PART 1</div>
        <h1>The Fundamental Mental Model</h1>
    </div>

    <h2>The Restaurant Analogy</h2>
    <p>Before diving into technical details, you need a mental model. Think of a web application like a <strong>restaurant</strong>:</p>

    <div class="diagram-box">
┌─────────────────────────────────────────────────────────────────────────┐
│                         THE RESTAURANT ANALOGY                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   FRONTEND                    BACKEND                    DATABASE        │
│   (Dining Room)               (Kitchen)                  (Pantry)        │
│   ═══════════════            ═══════════                ═════════════   │
│                                                                          │
│   • What customers see       • Where food is made       • Where all      │
│   • Menu (UI)                • Chef processes             ingredients    │
│   • Waiter takes orders        requests                   are stored     │
│     (sends requests)         • Has recipes              • Organized      │
│   • Serves food                (business rules)           storage        │
│     (displays data)                                                      │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘

THE FLOW:
═════════

Customer → Waiter → Kitchen → Pantry → Kitchen → Waiter → Customer
  (User)   (HTTP)   (Server)   (DB)   (Process)  (JSON)    (UI)

1. Customer (User) looks at menu (Frontend UI)
2. Customer tells waiter what they want (HTTP Request)
3. Waiter goes to kitchen (Request hits Backend)
4. Chef checks pantry for ingredients (Backend queries Database)
5. Chef prepares the dish (Backend processes data)
6. Waiter brings food to customer (HTTP Response)
7. Customer enjoys the meal (User sees result on screen)
    </div>

    <div class="concept-box">
        <h4>Key Insight</h4>
        <p>Every web application, from a simple blog to Facebook, follows this same fundamental pattern. The complexity increases, but the core flow remains: <strong>User → Frontend → Backend → Database → Backend → Frontend → User</strong></p>
    </div>

    <h2>Why This Separation?</h2>

    <div class="two-column">
        <div>
            <h4>Separation of Concerns</h4>
            <ul>
                <li>Each layer has ONE job</li>
                <li>Easier to understand</li>
                <li>Easier to modify</li>
                <li>Easier to test</li>
            </ul>
        </div>
        <div>
            <h4>Scalability</h4>
            <ul>
                <li>Scale each layer independently</li>
                <li>Replace technologies without rewriting everything</li>
                <li>Different teams can work on different layers</li>
            </ul>
        </div>
    </div>

    <!-- PART 2 -->
    <div class="part-header page-break" id="part2">
        <div class="part-number">PART 2</div>
        <h1>The Three-Tier Architecture</h1>
    </div>

    <div class="diagram-box">
┌─────────────────────────────────────────────────────────────────────────┐
│                    THREE-TIER ARCHITECTURE                               │
└─────────────────────────────────────────────────────────────────────────┘

                    ┌───────────────────────────────┐
                    │         USER'S BROWSER         │
                    │   (Chrome, Firefox, Safari)    │
                    └───────────────┬───────────────┘
                                    │
                    ┌───────────────▼───────────────┐
                    │      TIER 1: FRONTEND          │
                    │      ═════════════════         │
                    │                                │
                    │   • Next.js (React Framework)  │
                    │   • TypeScript                 │
                    │   • Tailwind CSS               │
                    │   • Runs in browser            │
                    │                                │
                    │   Location: frontend/ folder   │
                    └───────────────┬───────────────┘
                                    │
                            HTTP Requests
                           (JSON over HTTPS)
                                    │
                    ┌───────────────▼───────────────┐
                    │      TIER 2: BACKEND           │
                    │      ════════════════          │
                    │                                │
                    │   • FastAPI (Python)           │
                    │   • Business Logic             │
                    │   • Authentication             │
                    │   • External API calls         │
                    │                                │
                    │   Location: backend/ folder    │
                    └───────────────┬───────────────┘
                                    │
                             SQL Queries
                                    │
                    ┌───────────────▼───────────────┐
                    │      TIER 3: DATABASE          │
                    │      ════════════════          │
                    │                                │
                    │   • SQLite (Development)       │
                    │   • PostgreSQL (Production)    │
                    │   • Stores all data            │
                    │                                │
                    └───────────────────────────────┘
    </div>

    <h2>Your Project's Technology Stack</h2>

    <table>
        <tr>
            <th>Layer</th>
            <th>Technology</th>
            <th>Purpose</th>
            <th>Location</th>
        </tr>
        <tr>
            <td><strong>Frontend</strong></td>
            <td>Next.js 14 + TypeScript</td>
            <td>User interface, runs in browser</td>
            <td><code>frontend/</code></td>
        </tr>
        <tr>
            <td><strong>Styling</strong></td>
            <td>Tailwind CSS</td>
            <td>Visual appearance</td>
            <td><code>frontend/tailwind.config.ts</code></td>
        </tr>
        <tr>
            <td><strong>State</strong></td>
            <td>Zustand</td>
            <td>Frontend memory (auth state)</td>
            <td><code>frontend/src/store/</code></td>
        </tr>
        <tr>
            <td><strong>Backend</strong></td>
            <td>FastAPI (Python)</td>
            <td>API server, business logic</td>
            <td><code>backend/</code></td>
        </tr>
        <tr>
            <td><strong>Database</strong></td>
            <td>SQLite / PostgreSQL</td>
            <td>Persistent data storage</td>
            <td><code>backend/app.db</code></td>
        </tr>
        <tr>
            <td><strong>ORM</strong></td>
            <td>SQLAlchemy</td>
            <td>Python ↔ Database translation</td>
            <td><code>backend/app/models/</code></td>
        </tr>
        <tr>
            <td><strong>AI</strong></td>
            <td>Groq</td>
            <td>Image recognition, recipe generation</td>
            <td><code>backend/app/services/Groq.py</code></td>
        </tr>
    </table>

    <!-- PART 3 -->
    <div class="part-header page-break" id="part3">
        <div class="part-number">PART 3</div>
        <h1>The Frontend - In Depth</h1>
    </div>

    <h2>What is the Frontend?</h2>
    <p>The frontend is <strong>code that runs in the user's browser</strong>. When you visit a website, your browser downloads HTML, CSS, and JavaScript files, then executes them locally on your computer.</p>

    <div class="concept-box">
        <h4>Think of it this way</h4>
        <p>The frontend is like a <strong>restaurant menu and dining area</strong>. It's what customers see and interact with. The menu shows what's available, the decor creates ambiance, and the ordering process guides the customer through their experience.</p>
    </div>

    <h2>Frontend Folder Structure</h2>

    <div class="diagram-box">
frontend/
├── src/
│   ├── app/                         # PAGES (Routes)
│   │   ├── page.tsx                # → yoursite.com/
│   │   ├── login/page.tsx          # → yoursite.com/login
│   │   ├── register/page.tsx       # → yoursite.com/register
│   │   ├── layout.tsx              # Wraps ALL pages (shared structure)
│   │   │
│   │   └── (app)/                  # PROTECTED routes (need login)
│   │       ├── layout.tsx          # Layout for protected pages
│   │       ├── dashboard/page.tsx  # → yoursite.com/dashboard
│   │       ├── scan/page.tsx       # → yoursite.com/scan
│   │       ├── recipes/page.tsx    # → yoursite.com/recipes
│   │       └── settings/page.tsx   # → yoursite.com/settings
│   │
│   ├── components/                  # REUSABLE UI PIECES
│   │   ├── ui/                     # Generic components
│   │   │   ├── Button.tsx         # &lt;Button&gt; component
│   │   │   ├── Input.tsx          # &lt;Input&gt; component
│   │   │   └── Card.tsx           # &lt;Card&gt; component
│   │   ├── layout/                 # Structure components
│   │   │   ├── Navbar.tsx         # Navigation bar
│   │   │   └── Footer.tsx         # Page footer
│   │   └── recipe/                 # Feature-specific
│   │       └── RecipeCard.tsx     # Recipe display card
│   │
│   ├── lib/                         # UTILITIES
│   │   ├── api.ts                  # HTTP client (talks to backend)
│   │   └── utils.ts                # Helper functions
│   │
│   ├── store/                       # STATE MANAGEMENT
│   │   └── auth.ts                 # Login/logout state
│   │
│   └── types/                       # TYPE DEFINITIONS
│       └── api.ts                  # What data shapes look like
│
├── public/                          # STATIC FILES
│   └── images/                     # Images, fonts, etc.
│
├── package.json                     # Dependencies & scripts
├── tailwind.config.ts              # CSS configuration
├── next.config.ts                  # Framework configuration
└── tsconfig.json                   # TypeScript settings
    </div>

    <h2>Key Frontend Concepts</h2>

    <h3>A) Components - Building Blocks</h3>
    <p>React applications are built from <strong>components</strong> - reusable pieces of UI. Think of them like LEGO blocks that you combine to build pages.</p>

    <div class="code-label">frontend/src/app/page.tsx - Home Page Component</div>
    <pre><code><span class="keyword">export default function</span> <span class="function">Home</span>() {
  <span class="keyword">return</span> (
    &lt;<span class="function">main</span> className=<span class="string">"min-h-screen flex flex-col items-center"</span>&gt;

      <span class="comment">{/* Title */}</span>
      &lt;<span class="function">h1</span> className=<span class="string">"text-6xl"</span>&gt;FridgeChef&lt;/<span class="function">h1</span>&gt;

      <span class="comment">{/* Tagline */}</span>
      &lt;<span class="function">p</span> className=<span class="string">"text-2xl"</span>&gt;What can I make with what I have?&lt;/<span class="function">p</span>&gt;

      <span class="comment">{/* Reusable Button Component */}</span>
      &lt;<span class="function">Button</span> size=<span class="string">"lg"</span> variant=<span class="string">"primary"</span>&gt;
        Join the Kitchen
      &lt;/<span class="function">Button</span>&gt;

    &lt;/<span class="function">main</span>&gt;
  );
}</code></pre>

    <div class="concept-box">
        <h4>Component Reusability</h4>
        <p>Notice <code>&lt;Button&gt;</code> is a custom component defined once in <code>components/ui/Button.tsx</code>. You use it everywhere with different props (size, variant). Change it once, it updates everywhere.</p>
    </div>

    <h3>B) State - The Frontend's Memory</h3>
    <p>The frontend needs to remember things: Is the user logged in? What data was fetched? State management handles this.</p>

    <div class="code-label">frontend/src/store/auth.ts - Authentication State</div>
    <pre><code><span class="keyword">import</span> { create } <span class="keyword">from</span> <span class="string">'zustand'</span>;

<span class="keyword">const</span> useAuthStore = <span class="function">create</span>((set) => ({
  <span class="comment">// State (data being stored)</span>
  user: <span class="keyword">null</span>,              <span class="comment">// Currently logged in user</span>
  token: <span class="keyword">null</span>,             <span class="comment">// JWT authentication token</span>
  isAuthenticated: <span class="keyword">false</span>,  <span class="comment">// Quick check: logged in?</span>

  <span class="comment">// Actions (ways to change state)</span>
  <span class="function">login</span>: <span class="keyword">async</span> (email, password) => {
    <span class="keyword">const</span> response = <span class="keyword">await</span> authApi.<span class="function">login</span>(email, password);
    <span class="function">set</span>({
      token: response.access_token,
      isAuthenticated: <span class="keyword">true</span>
    });
    localStorage.<span class="function">setItem</span>(<span class="string">'auth_token'</span>, response.access_token);
  },

  <span class="function">logout</span>: () => {
    localStorage.<span class="function">removeItem</span>(<span class="string">'auth_token'</span>);
    <span class="function">set</span>({ user: <span class="keyword">null</span>, token: <span class="keyword">null</span>, isAuthenticated: <span class="keyword">false</span> });
  }
}));</code></pre>

    <h3>C) API Client - Talking to Backend</h3>
    <p>The frontend communicates with the backend via HTTP requests. The API client centralizes this communication.</p>

    <div class="code-label">frontend/src/lib/api.ts - HTTP Client</div>
    <pre><code><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;

<span class="comment">// Where the backend lives</span>
<span class="keyword">const</span> API_URL = <span class="string">'http://localhost:8000/api/v1'</span>;

<span class="comment">// Create axios instance (HTTP client)</span>
<span class="keyword">export const</span> api = axios.<span class="function">create</span>({
  baseURL: API_URL,
  headers: { <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span> }
});

<span class="comment">// INTERCEPTOR: Add auth token to EVERY request automatically</span>
api.interceptors.request.<span class="function">use</span>((config) => {
  <span class="keyword">const</span> token = localStorage.<span class="function">getItem</span>(<span class="string">'auth_token'</span>);
  <span class="keyword">if</span> (token) {
    config.headers.Authorization = <span class="string">`Bearer </span>${token}<span class="string">`</span>;
  }
  <span class="keyword">return</span> config;
});

<span class="comment">// Auth API functions</span>
<span class="keyword">export const</span> authApi = {
  <span class="function">register</span>: <span class="keyword">async</span> (email, password, name) => {
    <span class="keyword">const</span> { data } = <span class="keyword">await</span> api.<span class="function">post</span>(<span class="string">'/auth/register'</span>, { email, password, name });
    <span class="keyword">return</span> data;
  },

  <span class="function">login</span>: <span class="keyword">async</span> (email, password) => {
    <span class="keyword">const</span> { data } = <span class="keyword">await</span> api.<span class="function">post</span>(<span class="string">'/auth/login'</span>, { email, password });
    <span class="keyword">return</span> data;
  }
};</code></pre>

    <div class="warning-box">
        <h4>Interceptors are Powerful</h4>
        <p>The request interceptor automatically adds the authentication token to every request. You don't have to remember to add it manually each time. This is a common pattern in production applications.</p>
    </div>

    <!-- PART 4 -->
    <div class="part-header page-break" id="part4">
        <div class="part-number">PART 4</div>
        <h1>The Backend - In Depth</h1>
    </div>

    <h2>What is the Backend?</h2>
    <p>The backend is a <strong>program running on a server</strong> that receives requests, processes them, and sends responses. It's where the "real work" happens.</p>

    <div class="concept-box">
        <h4>Think of it this way</h4>
        <p>The backend is like the <strong>kitchen in a restaurant</strong>. Customers never see it, but it's where all the magic happens. The chef (backend) receives orders (requests), prepares dishes using ingredients from the pantry (database), and sends completed meals back to customers.</p>
    </div>

    <h2>Backend Folder Structure</h2>

    <div class="diagram-box">
backend/
├── app/
│   ├── main.py                      # APPLICATION ENTRY POINT
│   │                                # Everything starts here
│   │
│   ├── config.py                    # SETTINGS
│   │                                # Environment variables, configuration
│   │
│   ├── database.py                  # DATABASE CONNECTION
│   │                                # How to talk to the database
│   │
│   ├── models/                      # DATABASE TABLES (ORM)
│   │   ├── user.py                 # users table definition
│   │   ├── scan.py                 # scans table definition
│   │   ├── recipe.py               # recipes table definition
│   │   └── shopping_list.py        # shopping_lists table
│   │
│   ├── schemas/                     # DATA VALIDATION
│   │   ├── auth.py                 # What login/register accepts
│   │   ├── recipe.py               # What recipe endpoints accept
│   │   └── scan.py                 # What scan endpoints accept
│   │
│   ├── api/v1/                      # API ROUTES (endpoints)
│   │   ├── router.py               # Combines all endpoints
│   │   └── endpoints/
│   │       ├── auth.py             # /auth/register, /auth/login
│   │       ├── scans.py            # /scans endpoints
│   │       ├── recipes.py          # /recipes endpoints
│   │       └── health.py           # /health check
│   │
│   ├── services/                    # BUSINESS LOGIC
│   │   ├── auth.py                 # User creation, verification
│   │   ├── Groq.py               # AI integration
│   │   └── image.py                # Image processing
│   │
│   ├── core/                        # SECURITY
│   │   └── security.py             # Password hashing, JWT tokens
│   │
│   └── utils/                       # UTILITIES
│       └── logger.py               # Logging setup
│
├── requirements.txt                 # Python dependencies
├── Dockerfile                       # Container configuration
└── alembic/                        # Database migrations
    </div>

    <h2>Key Backend Concepts</h2>

    <h3>A) The Entry Point - main.py</h3>
    <p>This is where the application starts. It creates the FastAPI app, adds middleware, and connects all the pieces.</p>

    <div class="code-label">backend/app/main.py - Application Entry Point</div>
    <pre><code><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI
<span class="keyword">from</span> fastapi.middleware.cors <span class="keyword">import</span> CORSMiddleware
<span class="keyword">from</span> app.api.v1.router <span class="keyword">import</span> api_router
<span class="keyword">from</span> app.database <span class="keyword">import</span> Base, engine

<span class="comment"># Create the FastAPI application</span>
app = <span class="function">FastAPI</span>(
    title=<span class="string">"FridgeChef API"</span>,
    description=<span class="string">"Backend API for FridgeChef"</span>,
    version=<span class="string">"1.0.0"</span>
)

<span class="comment"># Create database tables (if they don't exist)</span>
Base.metadata.<span class="function">create_all</span>(bind=engine)

<span class="comment"># Add CORS middleware (allow frontend to talk to us)</span>
app.<span class="function">add_middleware</span>(
    CORSMiddleware,
    allow_origins=[<span class="string">"http://localhost:3000"</span>],  <span class="comment"># Frontend URL</span>
    allow_credentials=<span class="keyword">True</span>,
    allow_methods=[<span class="string">"*"</span>],      <span class="comment"># Allow all HTTP methods</span>
    allow_headers=[<span class="string">"*"</span>],      <span class="comment"># Allow all headers</span>
)

<span class="comment"># Mount all API routes under /api/v1</span>
app.<span class="function">include_router</span>(api_router, prefix=<span class="string">"/api/v1"</span>)

<span class="comment"># Root endpoint</span>
<span class="decorator">@app.get("/")</span>
<span class="keyword">async def</span> <span class="function">root</span>():
    <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Welcome to FridgeChef API"</span>}</code></pre>

    <h3>B) Models - Database Tables</h3>
    <p>Models define what data looks like in the database. Each model class becomes a table.</p>

    <div class="code-label">backend/app/models/user.py - User Database Model</div>
    <pre><code><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, String, DateTime, JSON
<span class="keyword">from</span> sqlalchemy.sql <span class="keyword">import</span> func
<span class="keyword">import</span> uuid
<span class="keyword">from</span> app.database <span class="keyword">import</span> Base

<span class="keyword">class</span> <span class="function">User</span>(Base):
    <span class="string">"""User model for authentication and preferences."""</span>

    __tablename__ = <span class="string">"users"</span>  <span class="comment"># Table name in database</span>

    <span class="comment"># Columns (fields in the table)</span>
    id = <span class="function">Column</span>(String(<span class="number">36</span>), primary_key=<span class="keyword">True</span>,
               default=<span class="keyword">lambda</span>: <span class="function">str</span>(uuid.<span class="function">uuid4</span>()))
    email = <span class="function">Column</span>(String(<span class="number">255</span>), unique=<span class="keyword">True</span>, nullable=<span class="keyword">False</span>)
    name = <span class="function">Column</span>(String(<span class="number">100</span>))
    password_hash = <span class="function">Column</span>(String(<span class="number">255</span>), nullable=<span class="keyword">False</span>)  <span class="comment"># NEVER plain text!</span>
    created_at = <span class="function">Column</span>(DateTime, default=func.<span class="function">now</span>())
    preferences = <span class="function">Column</span>(JSON, default={})</code></pre>

    <p>This creates a database table that looks like:</p>

    <table>
        <tr>
            <th>id</th>
            <th>email</th>
            <th>name</th>
            <th>password_hash</th>
            <th>created_at</th>
        </tr>
        <tr>
            <td>abc-123</td>
            <td>john@mail.com</td>
            <td>John</td>
            <td>$2b$12$hash...</td>
            <td>2024-01-01</td>
        </tr>
        <tr>
            <td>def-456</td>
            <td>jane@mail.com</td>
            <td>Jane</td>
            <td>$2b$12$hash...</td>
            <td>2024-01-02</td>
        </tr>
    </table>

    <h3>C) Schemas - Data Validation</h3>
    <p>Schemas define what the API accepts and returns. They validate incoming data and document the API.</p>

    <div class="code-label">backend/app/schemas/auth.py - Auth Schemas</div>
    <pre><code><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, EmailStr

<span class="comment"># What frontend sends to REGISTER</span>
<span class="keyword">class</span> <span class="function">UserRegister</span>(BaseModel):
    email: EmailStr          <span class="comment"># Must be valid email format</span>
    password: <span class="function">str</span>            <span class="comment"># Required</span>
    name: <span class="function">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>  <span class="comment"># Optional</span>

<span class="comment"># What frontend sends to LOGIN</span>
<span class="keyword">class</span> <span class="function">UserLogin</span>(BaseModel):
    email: EmailStr
    password: <span class="function">str</span>

<span class="comment"># What backend RETURNS after login</span>
<span class="keyword">class</span> <span class="function">Token</span>(BaseModel):
    access_token: <span class="function">str</span>
    token_type: <span class="function">str</span> = <span class="string">"bearer"</span></code></pre>

    <h3>D) Endpoints - API Routes</h3>
    <p>Endpoints are URLs that do specific things. Each endpoint handles a specific action.</p>

    <div class="code-label">backend/app/api/v1/endpoints/auth.py - Auth Endpoints</div>
    <pre><code><span class="keyword">from</span> fastapi <span class="keyword">import</span> APIRouter, Depends, HTTPException
<span class="keyword">from</span> app.schemas.auth <span class="keyword">import</span> UserRegister, UserLogin, Token
<span class="keyword">from</span> app.services.auth <span class="keyword">import</span> create_user, authenticate_user
<span class="keyword">from</span> app.core.security <span class="keyword">import</span> create_access_token

router = <span class="function">APIRouter</span>()

<span class="decorator">@router.post("/register", response_model=Token)</span>
<span class="keyword">async def</span> <span class="function">register</span>(user_data: UserRegister, db = <span class="function">Depends</span>(get_db)):
    <span class="string">"""Register a new user."""</span>

    <span class="comment"># 1. Create user in database</span>
    user = <span class="function">create_user</span>(
        db=db,
        email=user_data.email,
        password=user_data.password,
        name=user_data.name
    )

    <span class="comment"># 2. Create JWT token</span>
    access_token = <span class="function">create_access_token</span>(data={<span class="string">"sub"</span>: <span class="function">str</span>(user.id)})

    <span class="comment"># 3. Return token to frontend</span>
    <span class="keyword">return</span> {<span class="string">"access_token"</span>: access_token, <span class="string">"token_type"</span>: <span class="string">"bearer"</span>}


<span class="decorator">@router.post("/login", response_model=Token)</span>
<span class="keyword">async def</span> <span class="function">login</span>(user_data: UserLogin, db = <span class="function">Depends</span>(get_db)):
    <span class="string">"""Login and get access token."""</span>

    <span class="comment"># 1. Check credentials</span>
    user = <span class="function">authenticate_user</span>(db, user_data.email, user_data.password)

    <span class="keyword">if not</span> user:
        <span class="keyword">raise</span> <span class="function">HTTPException</span>(status_code=<span class="number">401</span>, detail=<span class="string">"Incorrect email or password"</span>)

    <span class="comment"># 2. Create and return token</span>
    access_token = <span class="function">create_access_token</span>(data={<span class="string">"sub"</span>: <span class="function">str</span>(user.id)})
    <span class="keyword">return</span> {<span class="string">"access_token"</span>: access_token, <span class="string">"token_type"</span>: <span class="string">"bearer"</span>}</code></pre>

    <h3>E) Services - Business Logic</h3>
    <p>Services contain the core logic, separate from HTTP handling. This separation makes code testable and reusable.</p>

    <div class="code-label">backend/app/services/auth.py - Auth Business Logic</div>
    <pre><code><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session
<span class="keyword">from</span> app.models.user <span class="keyword">import</span> User
<span class="keyword">from</span> app.core.security <span class="keyword">import</span> get_password_hash, verify_password

<span class="keyword">def</span> <span class="function">create_user</span>(db: Session, email: <span class="function">str</span>, password: <span class="function">str</span>, name: <span class="function">str</span> = <span class="keyword">None</span>):
    <span class="string">"""Create a new user in the database."""</span>

    <span class="comment"># Check if email already exists</span>
    existing = db.<span class="function">query</span>(User).<span class="function">filter</span>(User.email == email).<span class="function">first</span>()
    <span class="keyword">if</span> existing:
        <span class="keyword">raise</span> <span class="function">HTTPException</span>(status_code=<span class="number">400</span>, detail=<span class="string">"Email already registered"</span>)

    <span class="comment"># Hash the password (NEVER store plain text!)</span>
    password_hash = <span class="function">get_password_hash</span>(password)

    <span class="comment"># Create user object</span>
    user = <span class="function">User</span>(
        email=email,
        name=name,
        password_hash=password_hash
    )

    <span class="comment"># Save to database</span>
    db.<span class="function">add</span>(user)
    db.<span class="function">commit</span>()
    db.<span class="function">refresh</span>(user)

    <span class="keyword">return</span> user


<span class="keyword">def</span> <span class="function">authenticate_user</span>(db: Session, email: <span class="function">str</span>, password: <span class="function">str</span>):
    <span class="string">"""Verify user credentials."""</span>

    user = db.<span class="function">query</span>(User).<span class="function">filter</span>(User.email == email).<span class="function">first</span>()

    <span class="keyword">if not</span> user:
        <span class="keyword">return</span> <span class="keyword">None</span>

    <span class="keyword">if not</span> <span class="function">verify_password</span>(password, user.password_hash):
        <span class="keyword">return</span> <span class="keyword">None</span>

    <span class="keyword">return</span> user</code></pre>

    <!-- PART 5 -->
    <div class="part-header page-break" id="part5">
        <div class="part-number">PART 5</div>
        <h1>The Database - In Depth</h1>
    </div>

    <h2>What is a Database?</h2>
    <p>A database is a <strong>structured way to store and retrieve data permanently</strong>. Unlike variables in code, database data survives when the server restarts.</p>

    <div class="concept-box">
        <h4>Think of it this way</h4>
        <p>The database is like a <strong>pantry with organized shelves</strong>. Each shelf (table) holds one type of item (users, recipes, etc.). Each item has a label with specific information (columns). The chef (backend) knows exactly where to find everything.</p>
    </div>

    <h2>SQL vs ORM</h2>
    <p>You can talk to databases in two ways:</p>

    <div class="two-column">
        <div>
            <h4>Raw SQL</h4>
            <pre><code><span class="comment">-- Insert a user</span>
<span class="keyword">INSERT INTO</span> users
  (id, email, name, password_hash)
<span class="keyword">VALUES</span>
  (<span class="string">'abc-123'</span>, <span class="string">'john@mail.com'</span>,
   <span class="string">'John'</span>, <span class="string">'$2b$12$...'</span>);

<span class="comment">-- Find a user</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> email = <span class="string">'john@mail.com'</span>;</code></pre>
        </div>
        <div>
            <h4>ORM (Python)</h4>
            <pre><code><span class="comment"># Insert a user</span>
user = <span class="function">User</span>(
    email=<span class="string">"john@mail.com"</span>,
    name=<span class="string">"John"</span>,
    password_hash=<span class="string">"$2b$12$..."</span>
)
db.<span class="function">add</span>(user)
db.<span class="function">commit</span>()

<span class="comment"># Find a user</span>
user = db.<span class="function">query</span>(User).\
    <span class="function">filter</span>(User.email == <span class="string">"john@mail.com"</span>).\
    <span class="function">first</span>()</code></pre>
        </div>
    </div>

    <p><strong>Your project uses SQLAlchemy ORM</strong> - it translates Python code to SQL automatically. This means you write Python, not SQL.</p>

    <h2>Database Relationships</h2>
    <p>Data in different tables can be related to each other:</p>

    <div class="diagram-box">
DATABASE RELATIONSHIPS IN FRIDGECHEF
════════════════════════════════════

┌─────────────────┐         ┌─────────────────┐         ┌─────────────────┐
│     USERS       │         │     SCANS       │         │    RECIPES      │
├─────────────────┤         ├─────────────────┤         ├─────────────────┤
│ id (PK)         │────┐    │ id (PK)         │────┐    │ id (PK)         │
│ email           │    │    │ user_id (FK)────│────┘    │ user_id (FK)────│────┐
│ name            │    │    │ image_path      │         │ scan_id (FK)────│────┘
│ password_hash   │    │    │ ingredients     │         │ title           │
│ preferences     │    │    │ status          │         │ instructions    │
│ created_at      │    │    │ created_at      │         │ is_favorite     │
└─────────────────┘    │    └─────────────────┘         │ created_at      │
                       │                                └────────┬────────┘
                       │                                         │
                       │    ┌─────────────────┐                  │
                       │    │ SHOPPING_LISTS  │                  │
                       │    ├─────────────────┤                  │
                       └───►│ id (PK)         │                  │
                            │ user_id (FK)    │                  │
                            │ recipe_id (FK)──│──────────────────┘
                            │ name            │
                            │ items           │
                            └─────────────────┘

RELATIONSHIP TYPES:
═══════════════════

One-to-Many (1:N):
  • One User has MANY Scans
  • One User has MANY Recipes
  • One Scan has MANY Recipes
  • One Recipe has MANY ShoppingLists

PK = Primary Key (unique identifier)
FK = Foreign Key (reference to another table)
    </div>

    <h2>Common Database Operations</h2>

    <table>
        <tr>
            <th>Operation</th>
            <th>SQL</th>
            <th>SQLAlchemy ORM</th>
        </tr>
        <tr>
            <td><strong>Create</strong></td>
            <td>INSERT INTO...</td>
            <td>db.add(obj); db.commit()</td>
        </tr>
        <tr>
            <td><strong>Read (one)</strong></td>
            <td>SELECT ... WHERE id=X</td>
            <td>db.query(Model).filter(...).first()</td>
        </tr>
        <tr>
            <td><strong>Read (all)</strong></td>
            <td>SELECT * FROM...</td>
            <td>db.query(Model).all()</td>
        </tr>
        <tr>
            <td><strong>Update</strong></td>
            <td>UPDATE ... SET ... WHERE</td>
            <td>obj.field = value; db.commit()</td>
        </tr>
        <tr>
            <td><strong>Delete</strong></td>
            <td>DELETE FROM ... WHERE</td>
            <td>db.delete(obj); db.commit()</td>
        </tr>
    </table>

    <!-- PART 6 -->
    <div class="part-header page-break" id="part6">
        <div class="part-number">PART 6</div>
        <h1>How Everything Connects</h1>
    </div>

    <h2>Complete Request Flow</h2>
    <p>Let's trace what happens when a user uploads a fridge photo:</p>

    <div class="diagram-box">
COMPLETE FLOW: USER UPLOADS FRIDGE PHOTO
═════════════════════════════════════════

USER'S BROWSER                    SERVER                         EXTERNAL
══════════════                    ══════                         ════════

1. User clicks "Upload Photo"
        │
        ▼
2. Browser shows file picker
   User selects image.jpg
        │
        ▼
3. Frontend packages image
   into FormData object
        │
        ▼
4. axios.post('/scans', formData) ─────────────► 5. FastAPI receives request
   Headers: {                                        POST /api/v1/scans
     Authorization: Bearer eyJhbG...                      │
   }                                                      ▼
                                                6. Auth middleware validates JWT
                                                   Extracts user_id from token
                                                         │
                                                         ▼
                                                7. Save image to /uploads folder
                                                   Create Scan record in database
                                                   (status: "processing")
                                                         │
                                                         ▼
                                                8. Send image to ──────────► GOOGLE
                                                   Groq Vision API         Groq AI
                                                         │                       │
                                                         │◄───── Returns ────────┘
                                                         │       ingredients JSON
                                                         │       [{name: "milk",
                                                         │         quantity: "1 gallon"},
                                                         │        {name: "eggs", ...}]
                                                         ▼
                                                9. Update Scan record:
                                                   - ingredients = [...]
                                                   - status = "completed"
                                                   Save to database
                                                         │
                                                         ▼
                                               10. Return JSON response ────────┐
                                                                                │
        ┌───────────────────────────────────────────────────────────────────────┘
        │
        ▼
11. Frontend receives response:
    {
      id: "scan-uuid-123",
      status: "completed",
      ingredients: [
        {name: "milk", quantity: "1 gallon", confidence: 0.95},
        {name: "eggs", quantity: "6", confidence: 0.92}
      ]
    }
        │
        ▼
12. React updates state
    UI re-renders
    User sees detected ingredients
    </div>

    <h2>The API Contract</h2>
    <p>Frontend and Backend agree on a "contract" - what requests look like and what responses contain:</p>

    <div class="diagram-box">
API CONTRACT: LOGIN ENDPOINT
════════════════════════════

Endpoint: POST /api/v1/auth/login

┌─────────────────────────────────┐    ┌─────────────────────────────────┐
│          REQUEST                │    │         RESPONSE                │
├─────────────────────────────────┤    ├─────────────────────────────────┤
│                                 │    │                                 │
│  Headers:                       │    │  Success (200 OK):              │
│    Content-Type: application/   │    │  {                              │
│                  json           │    │    "access_token": "eyJhbG...", │
│                                 │    │    "token_type": "bearer"       │
│  Body:                          │    │  }                              │
│  {                              │    │                                 │
│    "email": "user@mail.com",    │    │  Error (401 Unauthorized):      │
│    "password": "secret123"      │    │  {                              │
│  }                              │    │    "detail": "Incorrect email   │
│                                 │    │               or password"      │
│                                 │    │  }                              │
└─────────────────────────────────┘    └─────────────────────────────────┘
    </div>

    <h2>All API Endpoints in FridgeChef</h2>

    <table>
        <tr>
            <th>Endpoint</th>
            <th>Method</th>
            <th>Purpose</th>
            <th>Auth Required</th>
        </tr>
        <tr>
            <td>/auth/register</td>
            <td>POST</td>
            <td>Create new user account</td>
            <td>No</td>
        </tr>
        <tr>
            <td>/auth/login</td>
            <td>POST</td>
            <td>Login, get JWT token</td>
            <td>No</td>
        </tr>
        <tr>
            <td>/auth/me</td>
            <td>GET</td>
            <td>Get current user info</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/scans</td>
            <td>POST</td>
            <td>Upload fridge photo</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/scans</td>
            <td>GET</td>
            <td>List user's scans</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/recipes/generate</td>
            <td>POST</td>
            <td>Generate recipes from scan</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/recipes</td>
            <td>GET</td>
            <td>List saved recipes</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/recipes/{id}/favorite</td>
            <td>PATCH</td>
            <td>Toggle favorite status</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/lists</td>
            <td>POST</td>
            <td>Create shopping list</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td>/lists</td>
            <td>GET</td>
            <td>List shopping lists</td>
            <td>Yes</td>
        </tr>
    </table>

    <!-- PART 7 -->
    <div class="part-header page-break" id="part7">
        <div class="part-number">PART 7</div>
        <h1>Authentication Deep Dive</h1>
    </div>

    <h2>Why Authentication?</h2>
    <p>You need to know <strong>WHO</strong> is making requests so you can:</p>
    <ul>
        <li>Show them their data (not someone else's)</li>
        <li>Prevent unauthorized access</li>
        <li>Track and limit usage</li>
        <li>Personalize the experience</li>
    </ul>

    <h2>JWT (JSON Web Token) Explained</h2>

    <div class="diagram-box">
WHAT IS A JWT TOKEN?
════════════════════

A JWT is a string that looks like this:
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyLTEyMyIsImV4cCI6MTcwNjc4NTIwMH0.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c

It has THREE parts separated by dots:

┌────────────────────────────────────────────────────────────────────────┐
│  PART 1: HEADER              PART 2: PAYLOAD           PART 3: SIGNATURE│
│  ════════════════           ═══════════════           ════════════════ │
│                                                                        │
│  eyJhbGciOiJIUzI1NiIs...   eyJzdWIiOiJ1c2VyLTEyMy...  SflKxwRJSMeKKF... │
│           │                         │                         │        │
│           ▼                         ▼                         ▼        │
│  {                          {                          HMAC-SHA256(    │
│    "alg": "HS256",            "sub": "user-123",        header + "." + │
│    "typ": "JWT"               "exp": 1706785200           payload,     │
│  }                          }                            SECRET_KEY    │
│                                                        )               │
│  Algorithm used             User ID (subject)          Proves token    │
│  to sign                    Expiration time            wasn't tampered │
└────────────────────────────────────────────────────────────────────────┘

The token is:
  • ENCODED (not encrypted!) - anyone can read the payload
  • SIGNED - tampering is detected because signature won't match
  • SELF-CONTAINED - no database lookup needed to validate
    </div>

    <h2>Complete Authentication Flow</h2>

    <div class="diagram-box">
JWT AUTHENTICATION FLOW
═══════════════════════

STEP 1: USER LOGS IN
────────────────────

  Frontend                              Backend
     │                                     │
     │  POST /auth/login                   │
     │  {email, password}                  │
     │ ───────────────────────────────────►│
     │                                     │
     │                                     │  1. Find user by email
     │                                     │  2. Verify password hash
     │                                     │  3. Create JWT:
     │                                     │     {
     │                                     │       "sub": "user-uuid-123",
     │                                     │       "exp": <7 days from now>
     │                                     │     }
     │                                     │  4. Sign with SECRET_KEY
     │                                     │
     │  {access_token: "eyJhbG..."}        │
     │◄───────────────────────────────────│
     │                                     │
     │  Store token in localStorage        │
     │                                     │


STEP 2: USER MAKES AUTHENTICATED REQUEST
────────────────────────────────────────

  Frontend                              Backend
     │                                     │
     │  GET /recipes                       │
     │  Header: Authorization: Bearer eyJ  │
     │ ───────────────────────────────────►│
     │                                     │
     │                                     │  1. Extract token from header
     │                                     │  2. Verify signature
     │                                     │  3. Check not expired
     │                                     │  4. Extract user_id from "sub"
     │                                     │  5. Query: SELECT * FROM recipes
     │                                     │            WHERE user_id = 'user-123'
     │                                     │
     │  [{recipe1}, {recipe2}, ...]        │
     │◄───────────────────────────────────│
     │                                     │
     │  Display user's recipes             │
    </div>

    <div class="warning-box">
        <h4>Security Critical</h4>
        <ul>
            <li><strong>Never store plain-text passwords</strong> - always hash with bcrypt</li>
            <li><strong>Keep SECRET_KEY secret</strong> - if leaked, anyone can forge tokens</li>
            <li><strong>Set reasonable expiration</strong> - balance security vs convenience</li>
            <li><strong>Use HTTPS in production</strong> - tokens can be intercepted over HTTP</li>
        </ul>
    </div>

    <!-- PART 8 -->
    <div class="part-header page-break" id="part8">
        <div class="part-number">PART 8</div>
        <h1>Configuration & Environment</h1>
    </div>

    <h2>Why Environment Variables?</h2>
    <p>You <strong>never hardcode secrets</strong> (passwords, API keys) in your code. Why?</p>
    <ul>
        <li>Code gets committed to Git and shared</li>
        <li>Different values needed for dev vs production</li>
        <li>Security: secrets shouldn't be in source code</li>
    </ul>

    <div class="code-label">.env file (NEVER commit this to git!)</div>
    <pre><code><span class="comment"># Database</span>
DATABASE_URL=postgresql://user:password@localhost/fridgechef

<span class="comment"># Security</span>
SECRET_KEY=my_super_secret_64_character_key_for_jwt_signing_abc123

<span class="comment"># External APIs</span>
GROQ_API_KEY=AIzaSyB...your_Groq_key_here

<span class="comment"># Frontend</span>
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1</code></pre>

    <div class="code-label">backend/app/config.py - Loading Environment Variables</div>
    <pre><code><span class="keyword">import</span> os
<span class="keyword">from</span> pydantic_settings <span class="keyword">import</span> BaseSettings

<span class="keyword">class</span> <span class="function">Settings</span>(BaseSettings):
    <span class="comment"># These are loaded from environment variables</span>
    SECRET_KEY: <span class="function">str</span> = os.<span class="function">getenv</span>(<span class="string">"SECRET_KEY"</span>, <span class="string">"dev-secret-key"</span>)
    GROQ_API_KEY: <span class="function">str</span> = os.<span class="function">getenv</span>(<span class="string">"GROQ_API_KEY"</span>, <span class="string">""</span>)
    DATABASE_URL: <span class="function">str</span> = os.<span class="function">getenv</span>(<span class="string">"DATABASE_URL"</span>, <span class="string">"sqlite:///./app.db"</span>)

    <span class="comment"># Constants</span>
    ACCESS_TOKEN_EXPIRE_MINUTES: <span class="function">int</span> = <span class="number">10080</span>  <span class="comment"># 7 days</span>
    UPLOAD_DIR: <span class="function">str</span> = <span class="string">"uploads"</span>
    MAX_UPLOAD_SIZE: <span class="function">int</span> = <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>  <span class="comment"># 10MB</span>

settings = <span class="function">Settings</span>()</code></pre>

    <h2>Configuration Files Reference</h2>

    <table>
        <tr>
            <th>File</th>
            <th>Purpose</th>
            <th>Commit to Git?</th>
        </tr>
        <tr>
            <td><code>.env</code></td>
            <td>Secret values (API keys, passwords)</td>
            <td><strong>NEVER</strong></td>
        </tr>
        <tr>
            <td><code>.env.example</code></td>
            <td>Template showing what variables are needed</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>.gitignore</code></td>
            <td>Files Git should ignore</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>package.json</code></td>
            <td>Frontend dependencies & scripts</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>requirements.txt</code></td>
            <td>Backend Python dependencies</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>tsconfig.json</code></td>
            <td>TypeScript compiler settings</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>tailwind.config.ts</code></td>
            <td>CSS framework customization</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>docker-compose.yml</code></td>
            <td>Multi-container orchestration</td>
            <td>Yes</td>
        </tr>
        <tr>
            <td><code>Dockerfile</code></td>
            <td>Container build instructions</td>
            <td>Yes</td>
        </tr>
    </table>

    <!-- PART 9 -->
    <div class="part-header page-break" id="part9">
        <div class="part-number">PART 9</div>
        <h1>Deployment - Going Live</h1>
    </div>

    <h2>Development vs Production</h2>

    <table>
        <tr>
            <th>Aspect</th>
            <th>Development (Your Computer)</th>
            <th>Production (The Internet)</th>
        </tr>
        <tr>
            <td><strong>Frontend URL</strong></td>
            <td>http://localhost:3000</td>
            <td>https://fridgechef.vercel.app</td>
        </tr>
        <tr>
            <td><strong>Backend URL</strong></td>
            <td>http://localhost:8000</td>
            <td>https://fridgechef-api.onrender.com</td>
        </tr>
        <tr>
            <td><strong>Database</strong></td>
            <td>SQLite (file on disk)</td>
            <td>PostgreSQL (cloud managed)</td>
        </tr>
        <tr>
            <td><strong>HTTPS</strong></td>
            <td>Not required</td>
            <td>Required (encryption)</td>
        </tr>
        <tr>
            <td><strong>Debug Mode</strong></td>
            <td>ON (detailed errors)</td>
            <td>OFF (hide internals)</td>
        </tr>
        <tr>
            <td><strong>Error Messages</strong></td>
            <td>Detailed (for debugging)</td>
            <td>Generic (security)</td>
        </tr>
    </table>

    <h2>Production Architecture</h2>

    <div class="diagram-box">
PRODUCTION DEPLOYMENT ARCHITECTURE
══════════════════════════════════

                        ┌────────────────────────────────────────┐
                        │              INTERNET                  │
                        │        (Users worldwide)               │
                        └───────────────────┬────────────────────┘
                                            │
                        ┌───────────────────▼────────────────────┐
                        │              CLOUDFLARE                 │
                        │    (DNS, CDN, DDoS protection)         │
                        └───────────────────┬────────────────────┘
                                            │
                ┌───────────────────────────┴───────────────────────┐
                │                                                    │
                ▼                                                    ▼
       ┌────────────────────┐                            ┌─────────────────────┐
       │      VERCEL        │                            │       RENDER        │
       │   (Frontend Host)  │                            │   (Backend Host)    │
       │                    │                            │                     │
       │  ┌──────────────┐  │                            │  ┌───────────────┐  │
       │  │   Next.js    │  │───── API Requests ────────►│  │   FastAPI     │  │
       │  │     App      │  │                            │  │     App       │  │
       │  └──────────────┘  │                            │  └───────┬───────┘  │
       │                    │                            │          │          │
       │  • Edge network    │                            │          ▼          │
       │  • Global CDN      │                            │  ┌───────────────┐  │
       │  • Auto SSL        │                            │  │  PostgreSQL   │  │
       │  • Instant deploys │                            │  │   Database    │  │
       └────────────────────┘                            │  └───────────────┘  │
                                                         │                     │
                                                         │          │          │
                                                         │          ▼          │
                                                         │  ┌───────────────┐  │
                                                         │  │ Groq │  │
                                                         │  │    API        │  │
                                                         │  └───────────────┘  │
                                                         └─────────────────────┘
    </div>

    <h2>Docker - Containerization</h2>
    <p>Docker packages your app with ALL its dependencies into a "container" that runs the same everywhere:</p>

    <div class="code-label">backend/Dockerfile - Container Build Instructions</div>
    <pre><code><span class="comment"># Start with Python base image</span>
<span class="keyword">FROM</span> python:3.11-slim

<span class="comment"># Set working directory inside container</span>
<span class="keyword">WORKDIR</span> /app

<span class="comment"># Copy dependency list first (for caching)</span>
<span class="keyword">COPY</span> requirements.txt .

<span class="comment"># Install Python dependencies</span>
<span class="keyword">RUN</span> pip install --no-cache-dir -r requirements.txt

<span class="comment"># Copy application code</span>
<span class="keyword">COPY</span> ./app ./app

<span class="comment"># Expose port 8000</span>
<span class="keyword">EXPOSE</span> 8000

<span class="comment"># Command to run when container starts</span>
<span class="keyword">CMD</span> ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]</code></pre>

    <div class="concept-box">
        <h4>Why Docker?</h4>
        <p>"It works on my machine" is no longer an excuse. Docker ensures your app runs identically on your laptop, your colleague's laptop, and production servers. The container includes the OS, runtime, dependencies - everything.</p>
    </div>

    <!-- PART 10 -->
    <div class="part-header page-break" id="part10">
        <div class="part-number">PART 10</div>
        <h1>Security Essentials</h1>
    </div>

    <h2>The Security Mindset</h2>
    <blockquote>
        "Never trust user input. Assume every request could be malicious."
    </blockquote>

    <h2>Security Measures in FridgeChef</h2>

    <h3>1. Password Security</h3>
    <div class="code-label">backend/app/core/security.py</div>
    <pre><code><span class="keyword">from</span> passlib.context <span class="keyword">import</span> CryptContext

<span class="comment"># BCrypt with cost factor 12 (slow = secure)</span>
pwd_context = <span class="function">CryptContext</span>(schemes=[<span class="string">"bcrypt"</span>], deprecated=<span class="string">"auto"</span>)

<span class="keyword">def</span> <span class="function">get_password_hash</span>(password: <span class="function">str</span>) -> <span class="function">str</span>:
    <span class="string">"""Hash a password - NEVER store plain text!"""</span>
    <span class="keyword">return</span> pwd_context.<span class="function">hash</span>(password)

<span class="keyword">def</span> <span class="function">verify_password</span>(plain_password: <span class="function">str</span>, hashed_password: <span class="function">str</span>) -> <span class="function">bool</span>:
    <span class="string">"""Verify a password against its hash."""</span>
    <span class="keyword">return</span> pwd_context.<span class="function">verify</span>(plain_password, hashed_password)</code></pre>

    <h3>2. Rate Limiting</h3>
    <p>Prevents brute-force attacks and abuse:</p>
    <pre><code><span class="decorator">@router.post("/login")</span>
<span class="decorator">@limiter.limit("5/minute")</span>  <span class="comment"># Max 5 login attempts per minute</span>
<span class="keyword">async def</span> <span class="function">login</span>(request: Request, user_data: UserLogin):
    ...</code></pre>

    <h3>3. Input Validation</h3>
    <p>Pydantic schemas automatically validate and reject bad input:</p>
    <pre><code><span class="keyword">class</span> <span class="function">UserRegister</span>(BaseModel):
    email: EmailStr      <span class="comment"># Validates email format</span>
    password: <span class="function">str</span>        <span class="comment"># Required, can add min_length</span>

<span class="comment"># Invalid email? Automatic 422 error, no code reaches database</span></code></pre>

    <h3>4. CORS (Cross-Origin Resource Sharing)</h3>
    <p>Controls which websites can call your API:</p>
    <pre><code>app.<span class="function">add_middleware</span>(
    CORSMiddleware,
    allow_origins=[<span class="string">"https://fridgechef.vercel.app"</span>],  <span class="comment"># Only your frontend</span>
    allow_credentials=<span class="keyword">True</span>,
    allow_methods=[<span class="string">"*"</span>],
    allow_headers=[<span class="string">"*"</span>],
)</code></pre>

    <h2>Common Vulnerabilities to Avoid</h2>

    <table>
        <tr>
            <th>Vulnerability</th>
            <th>What It Is</th>
            <th>Prevention</th>
        </tr>
        <tr>
            <td><strong>SQL Injection</strong></td>
            <td>Attacker injects SQL via input</td>
            <td>Use ORM (SQLAlchemy), never raw SQL with user input</td>
        </tr>
        <tr>
            <td><strong>XSS</strong></td>
            <td>Attacker injects JavaScript</td>
            <td>React escapes by default; sanitize user content</td>
        </tr>
        <tr>
            <td><strong>CSRF</strong></td>
            <td>Trick user into unwanted actions</td>
            <td>Use JWT tokens, not cookies for auth</td>
        </tr>
        <tr>
            <td><strong>Broken Auth</strong></td>
            <td>Weak passwords, exposed tokens</td>
            <td>BCrypt hashing, HTTPS, secure token storage</td>
        </tr>
        <tr>
            <td><strong>Sensitive Data Exposure</strong></td>
            <td>Secrets in code or logs</td>
            <td>Environment variables, don't log sensitive data</td>
        </tr>
    </table>

    <!-- PART 11 -->
    <div class="part-header page-break" id="part11">
        <div class="part-number">PART 11</div>
        <h1>Complete File Reference</h1>
    </div>

    <h2>Critical Files You Must Understand</h2>

    <table>
        <tr>
            <th>File</th>
            <th>What It Does</th>
            <th>Why It Matters</th>
        </tr>
        <tr>
            <td><code>backend/app/main.py</code></td>
            <td>Creates FastAPI app, adds middleware, mounts routes</td>
            <td><strong>Entry point</strong> - everything starts here</td>
        </tr>
        <tr>
            <td><code>backend/app/config.py</code></td>
            <td>Loads environment variables, settings</td>
            <td><strong>Configuration</strong> - controls behavior</td>
        </tr>
        <tr>
            <td><code>backend/app/database.py</code></td>
            <td>Database connection, session management</td>
            <td><strong>Data access</strong> - how you talk to DB</td>
        </tr>
        <tr>
            <td><code>backend/app/models/*.py</code></td>
            <td>Define database tables (User, Scan, Recipe...)</td>
            <td><strong>Data structure</strong> - what gets stored</td>
        </tr>
        <tr>
            <td><code>backend/app/schemas/*.py</code></td>
            <td>Define API input/output validation</td>
            <td><strong>Contracts</strong> - what API accepts/returns</td>
        </tr>
        <tr>
            <td><code>backend/app/api/v1/endpoints/*.py</code></td>
            <td>API route handlers (@router.get, @router.post)</td>
            <td><strong>Endpoints</strong> - URL handlers</td>
        </tr>
        <tr>
            <td><code>backend/app/services/*.py</code></td>
            <td>Business logic (auth, Groq, image)</td>
            <td><strong>Core logic</strong> - the "brains"</td>
        </tr>
        <tr>
            <td><code>frontend/src/lib/api.ts</code></td>
            <td>Axios HTTP client, API functions</td>
            <td><strong>Backend communication</strong></td>
        </tr>
        <tr>
            <td><code>frontend/src/store/auth.ts</code></td>
            <td>Zustand auth state management</td>
            <td><strong>User session</strong> handling</td>
        </tr>
        <tr>
            <td><code>frontend/src/app/*/page.tsx</code></td>
            <td>Page components (routes)</td>
            <td><strong>UI pages</strong> - what users see</td>
        </tr>
        <tr>
            <td><code>docker-compose.yml</code></td>
            <td>Multi-container orchestration</td>
            <td><strong>Local dev</strong> - run everything together</td>
        </tr>
        <tr>
            <td><code>.github/workflows/ci.yml</code></td>
            <td>GitHub Actions CI/CD pipeline</td>
            <td><strong>Automation</strong> - test on every push</td>
        </tr>
    </table>

    <!-- PART 12 -->
    <div class="part-header page-break" id="part12">
        <div class="part-number">PART 12</div>
        <h1>The App Building Checklist</h1>
    </div>

    <h2>When Building Any Application</h2>

    <div class="summary-box">
        <h3>Phase 1: Planning</h3>
        <ul class="checklist">
            <li>Define the problem you're solving</li>
            <li>Identify your users and their needs</li>
            <li>List core features (MVP - Minimum Viable Product)</li>
            <li>Choose your technology stack</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 2: Data Design</h3>
        <ul class="checklist">
            <li>What entities do you need? (Users, Posts, Products...)</li>
            <li>What fields does each entity have?</li>
            <li>How are entities related? (One-to-many, many-to-many)</li>
            <li>Draw an Entity-Relationship Diagram</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 3: API Design</h3>
        <ul class="checklist">
            <li>What actions can users perform? (CRUD operations)</li>
            <li>What endpoints do you need?</li>
            <li>What does each endpoint accept and return?</li>
            <li>Document your API contract</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 4: Backend Development</h3>
        <ul class="checklist">
            <li>Set up project structure</li>
            <li>Create database models</li>
            <li>Create validation schemas</li>
            <li>Implement endpoints</li>
            <li>Write business logic in services</li>
            <li>Add authentication</li>
            <li>Add error handling</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 5: Frontend Development</h3>
        <ul class="checklist">
            <li>Set up project structure</li>
            <li>Create page routes</li>
            <li>Build reusable components</li>
            <li>Set up API client</li>
            <li>Implement state management</li>
            <li>Connect to backend</li>
            <li>Add loading and error states</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 6: Security & Testing</h3>
        <ul class="checklist">
            <li>Validate all user input</li>
            <li>Hash passwords, never store plain text</li>
            <li>Use HTTPS in production</li>
            <li>Implement rate limiting</li>
            <li>Write unit tests for critical paths</li>
            <li>Test authentication flows</li>
        </ul>
    </div>

    <div class="summary-box">
        <h3>Phase 7: Deployment</h3>
        <ul class="checklist">
            <li>Set up environment variables for production</li>
            <li>Configure production database</li>
            <li>Deploy backend (Render, AWS, etc.)</li>
            <li>Deploy frontend (Vercel, Netlify, etc.)</li>
            <li>Set up domain and SSL</li>
            <li>Configure monitoring and logging</li>
        </ul>
    </div>

    <h2 class="page-break">The Master Framework</h2>

    <div class="diagram-box">
THE APP BUILDING FRAMEWORK
══════════════════════════

  ┌─────────────────────────────────────────────────────────────────┐
  │                                                                 │
  │   1. DEFINE THE PROBLEM                                         │
  │      └── What does the user want to accomplish?                 │
  │                                                                 │
  │   2. DESIGN THE DATA                                            │
  │      └── What entities? What relationships? What fields?        │
  │                                                                 │
  │   3. BUILD THE BACKEND                                          │
  │      ├── Models (database tables)                               │
  │      ├── Schemas (validation)                                   │
  │      ├── Endpoints (API routes)                                 │
  │      └── Services (business logic)                              │
  │                                                                 │
  │   4. BUILD THE FRONTEND                                         │
  │      ├── Pages (routes)                                         │
  │      ├── Components (UI pieces)                                 │
  │      ├── State (memory)                                         │
  │      └── API Client (backend communication)                     │
  │                                                                 │
  │   5. ADD AUTHENTICATION                                         │
  │      └── Who can do what?                                       │
  │                                                                 │
  │   6. INTEGRATE EXTERNAL SERVICES                                │
  │      └── AI, payments, email, etc.                              │
  │                                                                 │
  │   7. TEST & SECURE                                              │
  │      └── Does it work? Is it safe?                              │
  │                                                                 │
  │   8. DEPLOY                                                     │
  │      └── Put it on the internet                                 │
  │                                                                 │
  │   9. MONITOR & ITERATE                                          │
  │      └── Watch for errors, add features                         │
  │                                                                 │
  └─────────────────────────────────────────────────────────────────┘
    </div>

    <h2>Final Wisdom</h2>

    <div class="concept-box">
        <h4>Even if AI Writes Most Code in the Future, You Still Need to Understand:</h4>
        <ol>
            <li><strong>Architecture</strong> - How pieces fit together</li>
            <li><strong>Data Flow</strong> - How information moves through the system</li>
            <li><strong>Security</strong> - What can go wrong and how to prevent it</li>
            <li><strong>Trade-offs</strong> - Why one approach vs another</li>
            <li><strong>Debugging</strong> - How to find and fix problems</li>
        </ol>
        <p style="margin-top: 15px; font-weight: 600;">The person who understands the <em>why</em> behind the code will always be more valuable than someone who just copies what AI generates.</p>
    </div>

    <div class="success-box">
        <h4>You Now Understand</h4>
        <ul>
            <li>How frontend, backend, and database work together</li>
            <li>How HTTP requests flow through the system</li>
            <li>How authentication protects resources</li>
            <li>How to structure code for maintainability</li>
            <li>How to deploy applications to the internet</li>
            <li>How to think about security from day one</li>
        </ul>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p><strong>MasterClass: How Modern Applications Are Built</strong></p>
        <p>A comprehensive guide using FridgeChef as a case study</p>
        <p style="margin-top: 20px; font-size: 0.9em;">
            Generated for educational purposes<br>
            Build with understanding. Code with confidence.
        </p>
    </div>

</body>
</html>

